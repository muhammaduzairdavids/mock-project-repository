---
title: "**Mock Project Using the Maximov (2021) Amphipod Dataset**"
author: "Muhammad Uzair Davids"
date: "2025-02-20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## **Loading packages for the analysis**
First, I load the packages I want to use to clean the data set. 

```{r load library}
library(tidyverse) # the main packaage we will be using to tidy our data
library(tidyr)
library(dplyr)
library(ggplot2)
```

--- 

## **Loading the datasets**

The datasets used for this exercise is taken from the paper by [Alexy Maximov 
(2021)](https://doi.org/10.5061/dryad.0zpc866z6) titled: **Population dynamics 
of the glacial relict amphipod *Monoporeia affinis* in a subarctic lake**. 
There are three datasets: `data_environmental.csv` contains the data pertaining 
to the environmental variables, `data_macrzoobenthos.csv` contains data 
pertaining to the abundances of certain groups macrozoobenthos organisms, and
`data_population.csv` contains the data pertaining to the age structure of the 
*Monoporeia* spp. population. 

```{r load dataset}
# environmental data
raw_env <- read.csv(
  "C:/Program Files/Git/mock-project-repository/data/data_environmental.csv"
)

# macrzoobenthos abundance data
raw_macro <- read.csv(
  "C:/Program Files/Git/mock-project-repository/data/data_macrozoobenthos.csv"
) 

# population abundance data
raw_pop <- read.csv(
  "C:/Program Files/Git/mock-project-repository/data/data_population.csv"
)
```

---

# **Tidying the data**

The first step of this exercise will be to ensure that the data we're using is
in *tidy format*. Ensuring that our data is in *tidy format* helps to make the 
workflow easier to follow, but also allows for more effective communication and 
reproductibility of research. 

At its simplest *tidy data* is data where:

1. Columns represent variables.

2. Rows are observations.

3. Cells contain only a single value.

4. The data is in *wide format*.

5. There are no gaps in the data. 

It should also be mentioned that these guidelines may not be the only things
which qualify as *tidy data*. The data sets I am using abides by most of these 
guidelines, except for two - it is **not** in *wide format*, and there are data 
missing. 

There are also other steps we can take to tidy the data further, such as 
renaming columns, which may help with the reproducible aspect of this 
assignment.

## **Rename columns**

Some of the column names in the data set are not easily understood, so I 
will change them to make them easier to understand.

```{r rename columns}
# Rename the environmental data columns
tidy_env <- raw_env %>% rename(
  "Mean Concentration of Chlorophyll-a (µg.L-1)" 
  = Clorophyll.a..microgram.L.1,
  "Standard Error (µg.L-1)" 
  = SE,
  "Mean Near-Bottom Temperature (°C)" 
  = T.mean,
  "Minimum Near-Bottom Temperature (°C)" 
  = T.min,
  "Maximum Near-Bottom Temperature (°C)" 
  = T.max
)

# Rename the macrozoobenthos abundance data columns
tidy_macro <- raw_macro %>% rename(
  "Mean annual abundance of Monoporeia affinis (individuals.m-2)" 
  = Monoporeia..ind.m.2,
  "Mean annual abundance of chironomids (individuals.m-2)" 
  = Chironomidae..ind.m.2,
  "Mean annual abundance of other taxa (individuals.m-2)" 
  = Others..ind.m.2,
  "Mean annual abundance of all macrozoobenthos (individuals.m-2)" 
  = Macrozoobenthos..ind.m.2
)

# Rename the population abundance data columns
tidy_pop <- raw_pop %>% rename(
  "Abundance of age group 0+ (individuals.m-2)"
  = N.0...ind.m.2,
  "Abundance of age group 1+ (individuals.m-2)"
  = N.1...ind.m.2,
  "Abundance of age group 2+ (individuals.m-2)"
  = N.2...ind.m.2,
  "Total population abundance (individuals.m-2)"
  = N.population..ind.m.2,
  "Standard error (individuals.m-2)" 
  = SE
)

```

## **Removing missing data**

Gaps in data sets are considered to be in violation of *tidy format*. The 
environmental data set contains cells with "No data" values. To fix this, we 
will replace the "No data" message with `NA`. 

```{r removing missing data}
tidy_env[tidy_env == "No data"] <- NA # Replace "No data" with NA
```

## **Pivot longer**

Currently, our data is in *wide format*, which violates the tidy format 
guidelines. So let's fix that using the `pivot_longer` function from the `tidyr` 
package. This will allow us to convert the data into *long format*.

---